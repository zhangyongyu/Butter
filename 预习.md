论坛功能
--------

1. 上传头像
2. 私信和AT
3. 导航栏和 jinja2 模板继承



上传头像
--------
1. form
2. post方法 对应一个路由 保存静态文件的功能
    1. 文件后缀要做过滤 img png gif
    2. 文件名也要小心
    ../../home/akirayu/.bash_rc -> xxxxxx
    ~/.bash_rc
    ~/.bash_profile
3. get方法，本地的静态文件转发给用户


发私信 数据结构
--------------
1. id
2. content
3. title
4. sender_id # 这个不应该是从表单里面拿的，hidden，伪造成任何人
5. receiver_id


切换到 mongo
------------

1. 增删改查
2. id
3. deleted

部署
----
- nginx : web server
- gunicorn: application server
- wsgi: 包装出来一个app
- request -> nginx -> gunicorn -> wsgi -> app(Flask) -> route

1. 反向代理
    - gunicorn 2000
    - gunicorn 2002
    - nginx 80
2. 负载均衡
    - gunicorn worker
3. 静态文件托管
    - send_by_directory 每次都 send 很不好
    - 配置了一个规则，保存在 nginx 的缓存，不会走到 app 这一层

4. redis
    - 缓存
    - 共享数据
